{
  "hash": "aa36ff4be7332637f48bb9e5efe03f46",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Hands-On Exercise 02\"\nauthor: \"Chun-Han\"\ndate: \"January 19, 2026\"\ndate-modified: \"last-modified\"\nexecute: \n  eval: true\n  echo: true\n  warning: false\n  freeze: true\n---\n\n## Overview\n\n## 1 Getting Started\n\n### 1.1 Loading R packages\n\nNote: Ensure that the [pacman](https://cran.r-project.org/web/packages/pacman/) package has already been installed.\n\nThe code chunk below uses [`p_load()`](https://www.rdocumentation.org/packages/pacman/versions/0.5.1/topics/p_load) of pacman package to load the tidyverse family of packages.\n\n-   ggridges, a ggplot2 extension specially designed for plotting ridgeline plots,\n\n-   ggdist, a ggplot2 extension spacially desgin for visualising distribution and uncertainty,\n\n-   tidyverse, a family of R packages to meet the modern data science and visual communication needs,\n\n-   ggthemes, a ggplot extension that provides the user additional themes, scales, and geoms for the ggplots package, and\n\n-   colorspace, an R package provides a broad toolbox for selecting individual colors or color palettes, manipulating these colors, and employing them in various kinds of visualisations.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(ggdist, ggridges, ggthemes, colorspace, tidyverse)\n```\n:::\n\n\n### 1.2 Importing data\n\nFor the purpose of this exercise, a data file called Exam_data will be used. It consists of year end examination grades of a cohort of primary 3 students from a local school. It is in csv file format.\n\n-   The code chunk below imports *exam_data.csv* into R environment by using [*read_csv()*](https://readr.tidyverse.org/reference/read_delim.html) function of [**readr**](https://readr.tidyverse.org/) package.\n\n-   **readr** is one of the tidyverse package.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexam_data <- read_csv(\"data/Exam_data.csv\")\n```\n:::\n\n\n**Data contains:**\n\n-   Year end examination grades of a cohort of primary 3 students from a local school.\n\n-   There are a total of seven attributes. Four of them are categorical data type and the other three are in continuous data type.\n\n    -   The categorical attributes are: ID, CLASS, GENDER and RACE.\n\n    -   The continuous attributes are: MATHS, ENGLISH and SCIENCE.\n\n## 2 Beyond ggplot2 Annotation: ggrepel\n\nOne of the challenge in plotting statistical graph is annotation, especially with large number of data points.\n\n::: panel-tabset\n### The Plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n### The Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, \n       aes(x= MATHS, \n           y=ENGLISH)) +\n  geom_point() +\n  geom_smooth(method=lm, \n              size=0.5) +  \n  geom_label(aes(label = ID), \n             hjust = .5, \n             vjust = -.5) +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100)) +\n  ggtitle(\"English scores versus Maths scores for Primary 3\")\n```\n:::\n\n:::\n\n### 2.1 Introduction of ggrepel\n\n[**ggrepel**](https://ggrepel.slowkow.com/) is an extension of **ggplot2** package which provides `geoms` for **ggplot2** to repel overlapping text seen below. Simply replace `geom_text()` by [`geom_text_repel()`](https://ggrepel.slowkow.com/reference/geom_text_repel.html) and `geom_label()` by [`geom_label_repel`](https://ggrepel.slowkow.com/reference/geom_text_repel.html).\n\n### 2.2 Working with ggrepel\n\n::: panel-tabset\n### The Plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n### The Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(ggrepel)\n\nggplot(data=exam_data, \n       aes(x= MATHS, \n           y=ENGLISH)) +\n  geom_point() +\n  geom_smooth(method=lm, \n              size=0.5) +  \n  geom_label_repel(aes(label = ID), \n                   fontface = \"bold\") +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100)) +\n  ggtitle(\"English scores versus Maths scores for Primary 3\")\n```\n:::\n\n:::\n\n::: panel-tabset\n### The Plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n### The Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(ggrepel)\n\nggplot(data=exam_data, \n       aes(x= SCIENCE, \n           y=ENGLISH)) +\n  geom_point(color = \"#8E9AAF\") +\n  geom_point() +\n  geom_smooth(method=lm, \n              size=0.5,\n              color=\"#4A4E69\") +  \n  geom_label_repel(aes(label = ID), \n                   fontface = \"bold\") +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100)) +\n  ggtitle(\"English scores versus Science scores for Primary 3\")\n```\n:::\n\n:::\n\n::: callout-note\nBenefits of ggrepel \n\n-   I think its best feature is how it acts like magnets, automatically \"pushing\" labels apart. No matter how crowded the data points are, the labels will find their own space and never stack on top of each other.\n\n-   Even if a label gets pushed away to avoid clutter, it automatically draws a thin line back to the original dot. This makes it very easy for the audience to see exactly which data point the label belongs to.\n\n:::\n\n## 3 Beyond ggplot2 Themes\nggplot2 has eight [built-in themes](https://ggplot2.tidyverse.org/reference/ggtheme.html):\n`theme_gray()`,`theme_bw()`,`theme_classic()`,`theme_dark()`\n,`theme_light()`,`theme_linedraw()`,`theme_minimal()`, `theme_void()`\n\n::: panel-tabset\n### The Plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n### The Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, \n             aes(x = SCIENCE)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  theme_classic() +\n  ggtitle(\"Distribution of Maths scores\") \n```\n:::\n\n:::\n\n::: panel-tabset\n### The Plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n### The Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"#8E9AAF\", \n                 fill=\"grey90\") +\n  theme_gray() +\n  ggtitle(\"Distribution of Science scores\") \n```\n:::\n\n:::\n\n### 3.1 Working with ggtheme package\n[**ggthemes**](https://cran.r-project.org/web/packages/ggthemes/) provides [‘ggplot2’ themes](https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/) that replicate the look of plots made by:\n\n-   [Fivethirtyeight](https://fivethirtyeight.com/)\n\n-   [The Economist](https://www.economist.com/graphic-detail)\n\n-   [The Wall Street Journal](https://www.pinterest.com/wsjgraphics/wsj-graphics/)\n\n-   among others\n\nThe Economist theme is used below.\n\n::: panel-tabset\n### The Plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n### The Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  ggtitle(\"Distribution of Maths scores\") +\n  theme_economist()\n```\n:::\n\n:::\n\nThe Wall Street Journal theme is used below.\n\n::: panel-tabset\n### The Plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n### The Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 200,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  ggtitle(\"Distribution of Maths scores\") +\n  theme_wsj() +\n  theme(plot.title = element_text(size = 18))\n```\n:::\n\n:::\n\n### 3.2 Working with hrbthems package\n[**hrbrthemes**](https://cinc.rud.is/web/packages/hrbrthemes/) package provides a base theme that focuses on typographic elements, including where various labels are placed as well as the fonts that are used.\n\n::: panel-tabset\n### The Plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n\n### The Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggrepel)\nlibrary(hrbrthemes)\nlibrary(ggplot2)\n\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  ggtitle(\"Distribution of Maths scores\") +\n  theme_ipsum()\n```\n:::\n\n:::\n\nThe second goal centers around productivity for a production workflow. In fact, this “production workflow” is the context for where the elements of hrbrthemes should be used.\n\n::: panel-tabset\n### The Plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n\n### The Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  ggtitle(\"Distribution of Maths scores\") +\n  theme_ipsum(axis_title_size = 18,\n              base_size = 15,\n              grid = \"Y\")\n```\n:::\n\n:::\n\n::: callout-note\n-   `axis_title_size` argument is used to increase the font size of the axis title to 18,\n\n-   `base_size` argument is used to increase the default axis label to 15\n\n-   `grid` argument is used to remove the x-axis grid lines\n:::\n\n## 4  Beyond Single Graph\nTo build a more compelling narrative, it is often necessary to combine multiple visualizations into a single, cohesive figure. This section focuses on using ggplot2 extensions to facilitate professional plot composition. To begin, we will generate three foundational statistical graphics as the building blocks for our exercise.\n\n### Plot 1: Distribution of Math Scores (Histogram)\n\n::: panel-tabset\n### The Plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n:::\n\n\n### The Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\np1 <- ggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") + \n  coord_cartesian(xlim=c(0,100)) +\n  ggtitle(\"Distribution of Maths scores\")\n\np1\n```\n:::\n\n:::\n\n### Plot 2: Distribution of English Scores (Histogram)\n\n::: panel-tabset\n### The Plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-23-1.png){width=672}\n:::\n:::\n\n\n### The Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\np2 <- ggplot(data=exam_data, \n             aes(x = ENGLISH)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") + \n  coord_cartesian(xlim=c(0,100)) +\n  ggtitle(\"Distribution of Maths scores\")\n\np2\n```\n:::\n\n:::\n\n### Plot 3: English vs Maths score (Scatterplot)\n\n::: panel-tabset\n### The Plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-25-1.png){width=672}\n:::\n:::\n\n\n### The Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\np3 <- ggplot(data=exam_data, \n             aes(x= MATHS, \n                 y=ENGLISH)) +\n  geom_point() +\n  geom_smooth(method=lm, \n              size=0.5) +  \n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100)) +\n  ggtitle(\"English vs Maths scores for Primary 3\")\n\np3\n```\n:::\n\n:::\n\n### 4.1 Creating Composite Graphics: pathwork methods\nThere are several ggplot2 extension’s functions support the needs to prepare composite figure by combining several graphs such as [`grid.arrange()`](https://cran.r-project.org/web/packages/gridExtra/vignettes/arrangeGrob.html) of **gridExtra** package and [`plot_grid()`](https://wilkelab.org/cowplot/reference/plot_grid.html) of [**cowplot**](https://wilkelab.org/cowplot/) package.\n\nThis section uses a ggplot2 extension called [**patchwork**](https://patchwork.data-imaginist.com/)**,** specially designed for combining separate ggplot2 graphs into a single figure.\n\nPatchwork package has a very simple syntax to create layouts. General syntax:\n\n-   Plus Sign \"+\" - Two-Column Layout\n\n-   Parenthesis \"( )\" - Create a subplot group.\n\n-   Division Sign \"/\" - Two-Row Layout\n\n### 4.2 Combining two ggplot2 graphs\nFigure in the tabset below shows a composite of two histograms created using patchwork. Note how simple the syntax used to create the plot!\n\n::: panel-tabset\n### The Plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-27-1.png){width=672}\n:::\n:::\n\n\n### The Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(patchwork)\n\np1 + p2\n```\n:::\n\n:::\n\n### 4.3 Combining three ggplot2 graphs\nWe can plot more complex composite by using appropriate operators. For example, the composite figure below is plotted by using:\n\nMore complex composites can be achieved by using appropriate operators. For example, the composite figure below uses:\n\n-   “/” - stack two ggplot2 graphs on top of another\n\n-   “\\|” - place the plots adjacent to each other\n\n-   “( )” - define plot sequence\n\n::: panel-tabset\n### The Plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-29-1.png){width=672}\n:::\n:::\n\n\n### The Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\n(p1 / p2) | p3\n```\n:::\n\n:::\n\n### 4.4 Creating a composite figure with tag\nIn order to identify subplots in text, patchwork also provides auto-tagging capabilities as shown in the figure below.\n\n::: panel-tabset\n### The Plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-31-1.png){width=672}\n:::\n:::\n\n\n### The Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\n((p1 / p2) | p3) + \n  plot_annotation(tag_levels = 'I')\n```\n:::\n\n:::\n\n::: callout-note\nNote the I, II, III labels in the subplots have been automatically labelled.\n:::\n\n### 4.5 Creating figure with insert\nBeside providing functions to place plots next to each other based on the provided layout. With [`inset_element()`](https://patchwork.data-imaginist.com/reference/inset_element.html) of **patchwork** , we can place one or several plots or graphic elements freely on top or below another plot.\n\n:::panel-tabset\n### The Plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-33-1.png){width=672}\n:::\n:::\n\n\n### The Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\np3 + inset_element(p2, \n                   left = 0.02, \n                   bottom = 0.7, \n                   right = 0.5, \n                   top = 1)\n```\n:::\n\n:::\n\n### 4.6 Creating a composite figure by using patchwork and ggtheme\nFigure below is created by combining patchwork and theme_economist() of ggthemes package discussed earlier.\n\n:::panel-tabset\n### The Plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-35-1.png){width=672}\n:::\n:::\n\n\n### The Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\npatchwork <- (p1 / p2) | p3\npatchwork & theme_economist()\n```\n:::\n\n:::\n\n::: callout-note\n\nIf the text exceeds the plot boundaries, you can add `theme(plot.title = element_text(size = 10))` to adjust the font size accordingly\n\n:::panel-tabset\n### The Plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](HE02_files/figure-html/unnamed-chunk-37-1.png){width=672}\n:::\n:::\n\n\n### The Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\npatchwork <- (p1 / p2) | p3\npatchwork & theme_economist() & \n  theme(plot.title = element_text(size = 10))\n```\n:::\n\n:::\n:::\n",
    "supporting": [
      "HE02_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}